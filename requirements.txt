# ========================
# Веб-фреймворк и API
# ========================
fastapi[all]==0.104.1
uvicorn[standard]==0.24.0  # ASGI сервер для FastAPI

# ========================
# Telegram Bot (Aiogram 3.x)
# ========================
aiogram==3.8.0
aiohttp==3.9.1  # HTTP-клиент для aiogram (уже в зависимостях, но явно указываем версию)

# ========================
# База данных и ORM
# ========================
sqlalchemy==2.0.23
asyncpg==0.29.0  # Асинхронный драйвер для PostgreSQL
alembic==1.13.0  # Миграции базы данных
psycopg2-binary==2.9.9  # Синхронный драйвер для скриптов (опционально)

# ========================
# Аутентификация и безопасность
# ========================
python-jose[cryptography]==3.3.0  # JWT токены
passlib[bcrypt]==1.7.4  # Хеширование паролей
python-multipart==0.0.6  # Для загрузки файлов в FastAPI

# ========================
# Работа с файлами и парсинг книг
# ========================
# PDF
pypdf2==3.0.1
pdfminer.six==20221105  # Более продвинутый парсинг PDF
# EPUB
ebooklib==0.18
lxml==4.9.3  # Для парсинга XML в EPUB
# Общее
python-magic==0.4.27  # Определение MIME-типов
pillow==10.1.0  # Для работы с изображениями (обложки книг)

# ========================
# Фоновые задачи (Celery)
# ========================
celery==5.3.4
redis==5.0.1  # Брокер для Celery
flower==2.0.1  # Мониторинг Celery (опционально)

# ========================
# Хранение файлов (S3/Yandex Cloud)
# ========================
boto3==1.34.0  # AWS SDK (работает и с Yandex Cloud S3)

# ========================
# ИИ и ML (конспекты)
# ========================
openai==1.3.0  # Официальный клиент OpenAI API
tiktoken==0.5.1  # Подсчет токенов для OpenAI
langchain==0.0.354  # Для сложных сценариев работы с ИИ (опционально)

# ========================
# Валидация данных
# ========================
pydantic[email]==2.5.0
pydantic-settings==2.1.0  # Управление настройками

# ========================
# Утилиты и вспомогательные
# ========================
python-dotenv==1.0.0  # Загрузка .env файлов
httpx==0.25.1  # Асинхронный HTTP-клиент
tenacity==8.2.3  # Повторные попытки запросов (retry logic)
pytz==2023.3.post1  # Работа с временными зонами
click==8.1.7  # CLI утилиты

# ========================
# Тестирование
# ========================
pytest==7.4.3
pytest-asyncio==0.21.1  # Тестирование асинхронного кода
httpx==0.25.1  # HTTP-клиент для тестов
factory-boy==3.3.0  # Фабрики тестовых данных